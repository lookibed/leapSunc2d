# leapSync2D

**leapSync2D** — это скрипт для автоматической генерации анимации синхронизации губ (`.mp4`) на основе аудиофайла (`.wav`).

---

## Как работает
Процесс включает следующие этапы:
1. **Распознавание речи (STT)**: Используется Vosk для преобразования аудио в текст с временными метками.
2. **Фонемный разбор**: Анализ слов для определения их фонем.
3. **Сопоставление с виземами**: Группировка фонем в виземы (видимые формы губ для воспроизведения звуков речи).
4. **Создание видео**: Генерация видео с использованием изображений губ, соответствующих виземам.

---

## Требования
### Обязательные условия:
- **Формат аудио**: Аудиофайл должен быть в формате WAV со следующими параметрами:
  - **Моно**
  - **16 бит**
  - **Частота дискретизации 16 кГц**
- **Библиотеки**:
  - [Vosk](https://github.com/alphacep/vosk-api) (для распознавания речи)
  - `numpy`
  - `wave`
  - `PyAudio`
  - `imageio`
  - `moviepy`

---

## Быстрый старт
1. Установите зависимости:
   ```bash
   pip install vosk numpy wave pyaudio imageio moviepy
2. Подготовьте аудиофайл (speech_audio.wav) в требуемом формате WAV.
3. При необходимости замените таблицу визем и изображения губ в папке visemes на свои.
4. Запустите скрипт main.py

---

## Возможности
- **Настраиваемая таблица визем**: Вы можете адаптировать таблицу визем для своего языка или требований.
- **Поддержка записи аудио**:
  - Скрипт `rec.py` позволяет записывать аудио в нужном формате.
  - Скрипт `play.py` позволяет сразу просмотреть результат генерации.

---
## Таблица визем по умолчанию
Ниже представлена таблица сопоставления фонем с группами визем:

| Фонема | Группа визем |
|--------|--------------|
| а      | а_я          |
| о      | о_ё          |
| я      | а_я          |
| э      | э_е          |
| е      | э_е          |
| у      | у_ю          |
| ю      | у_ю          |
| и      | и            |
| ы      | ы            |
| б      | б_п          |
| п      | б_п          |
| м      | м            |
| в      | ф_в          |
| ф      | ф_в          |
| г      | г_к          |
| к      | г_к          |
| х      | х            |
| д      | д_т_н        |
| т      | д_т_н        |
| н      | д_т_н        |
| ж      | ж_ш          |
| ш      | ж_ш          |
| ч      | ч_щ          |
| щ      | ч_щ          |
| з      | з_с_ц        |
| с      | з_с_ц        |
| ц      | з_с_ц        |
| л      | л            |
| р      | р            |
| й      | й            |
